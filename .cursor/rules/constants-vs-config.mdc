---
description: Decide whether a constant should be application config or a code constant
alwaysApply: true
---

# Constants vs Application Configuration

Before adding a new constant, decide whether it belongs in **application configuration** or as a **standard constant** in code.

## Use application config (`src/config/index.ts`) when the value:

- May change per environment (dev/staging/prod) or deployment
- Is a tunable that operators or developers might override (e.g. via env)
- Affects runtime behavior in a way that could vary by install (timeouts, cache TTLs, feature flags, API URLs)

**Examples:** `cacheMaxAgeMs`, `apiBaseUrl`, `constructionDisabled`, retry delays, request timeouts.

## Use a standard constant (in the module that uses it, or a shared constants file) when the value:

- Is fixed by the domain or protocol (e.g. sentinel IDs, algorithm parameters, hash seeds)
- Must stay consistent across the codebase and must not be overridden (e.g. `OPTIMISTIC_PROP_ID`, storage keys, magic numbers in algorithms)
- Is a pure unit conversion or derived literal (e.g. `ONE_HOUR_MS` used only to build config defaults)

**Examples:** `OPTIMISTIC_PROP_ID`, `METADATA_KEY`, djb2 seed `5381`, copyright year in footer.

## Rule of thumb

Ask: “Would we ever want to change this without changing code?”

- **Yes** → config (and consider env override).
- **No** → keep as a constant in code.
